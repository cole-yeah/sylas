{"version":3,"sources":["lib/router/Router.js","lib/router/BrowserRouter.js","lib/router/matchPath.js","lib/router/Switch.js","lib/router/Route.js","lib/router/Link.js","pages/Alg/index.js","pages/Main/index.js","router/index.js","common/utils/history.js","App.js","reportWebVitals.js","index.js"],"names":["RouterContext","createContext","useRouterContext","useContext","Router","history","children","useState","location","setLocation","useEffect","listen","curLocation","Provider","value","BrowserRouter","pathToRegexp","require","cache","cacheCount","compilePath","path","options","cacheKey","end","strict","sensitive","pathCache","keys","result","regexp","matchPath","pathname","Array","isArray","exact","paths","concat","reduce","matched","match","exec","url","values","isExact","params","memo","key","index","name","Switch","props","element","React","Children","forEach","child","isValidElement","from","cloneElement","computedMatch","renderFunc","Route","component","createElement","LinkAnchor","to","navigate","href","onClick","e","preventDefault","Link","push","Alg","Main","state","setState","console","log","prevState","createBrowserHistory","App","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f56e1a55.chunk.js","sourcesContent":["import React, { useEffect, useState, createContext, useContext } from 'react';\r\n\r\nconst RouterContext = createContext(null);\r\n\r\nconst Router = ({ history, children }) => {\r\n  const [location, setLocation] = useState(history.location);\r\n  useEffect(() => {\r\n    history.listen(curLocation => {\r\n      setLocation(curLocation.location);\r\n    });\r\n  }, [history]);\r\n  return (\r\n    <RouterContext.Provider\r\n      value={{\r\n        history,\r\n        location,\r\n      }}\r\n    >\r\n      {children}\r\n    </RouterContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useRouterContext = () => useContext(RouterContext);\r\n\r\nexport default Router;\r\n","import React from 'react';\r\nimport Router from './Router';\r\n\r\nconst BrowserRouter = ({ history, children }) => {\r\n  return <Router history={history}>{children}</Router>;\r\n};\r\n\r\nexport default BrowserRouter;\r\n","const { pathToRegexp } = require('path-to-regexp');\r\n\r\nconst cache = {};\r\nconst cacheLimit = 10000;\r\nlet cacheCount = 0;\r\n\r\nfunction compilePath(path, options) {\r\n  const cacheKey = `${options.end}${options.strict}${options.sensitive}`;\r\n  const pathCache = cache[cacheKey] || (cache[cacheKey] = {});\r\n\r\n  if (pathCache[path]) return pathCache[path];\r\n\r\n  const keys = [];\r\n  const regexp = pathToRegexp(path, keys, options);\r\n  const result = { regexp, keys };\r\n\r\n  if (cacheCount < cacheLimit) {\r\n    pathCache[path] = result;\r\n    cacheCount++;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Public API for matching a URL pathname to a path.\r\n */\r\nfunction matchPath(pathname, options = {}) {\r\n  if (typeof options === 'string' || Array.isArray(options)) {\r\n    options = { path: options };\r\n  }\r\n\r\n  const { path, exact = false, strict = false, sensitive = false } = options;\r\n\r\n  const paths = [].concat(path);\r\n\r\n  return paths.reduce((matched, path) => {\r\n    if (!path && path !== '') return null;\r\n    if (matched) return matched;\r\n\r\n    const { regexp, keys } = compilePath(path, {\r\n      end: exact,\r\n      strict,\r\n      sensitive,\r\n    });\r\n    const match = regexp.exec(pathname);\r\n\r\n    if (!match) return null;\r\n\r\n    const [url, ...values] = match;\r\n    const isExact = pathname === url;\r\n\r\n    if (exact && !isExact) return null;\r\n\r\n    return {\r\n      path, // the path used to match\r\n      url: path === '/' && url === '' ? '/' : url, // the matched portion of the URL\r\n      isExact, // whether or not we matched exactly\r\n      params: keys.reduce((memo, key, index) => {\r\n        memo[key.name] = values[index];\r\n        return memo;\r\n      }, {}),\r\n    };\r\n  }, null);\r\n}\r\n\r\nexport default matchPath;\r\n","import React from 'react';\r\nimport { useRouterContext } from './Router';\r\nimport matchPath from './matchPath';\r\n\r\n// 根据url对组件进行匹配\r\nconst Switch = props => {\r\n  const { children } = props;\r\n  const { location } = useRouterContext();\r\n  const renderFunc = () => {\r\n    let element,\r\n      match = null;\r\n    React.Children.forEach(children, child => {\r\n      if (!match && React.isValidElement(child)) {\r\n        element = child;\r\n        const path = child.props.path || child.props.from;\r\n        match = matchPath(location.pathname, { ...child.props, path });\r\n      }\r\n    });\r\n    return match\r\n      ? React.cloneElement(element, {\r\n          location,\r\n          computedMatch: match,\r\n        })\r\n      : null;\r\n  };\r\n  return renderFunc();\r\n};\r\n\r\nexport default Switch;\r\n","import React from 'react';\r\n\r\nconst Route = props => {\r\n  const { component, children, computedMatch } = props;\r\n  return (\r\n    <>\r\n      {computedMatch\r\n        ? children\r\n          ? typeof children === 'function'\r\n            ? children(props)\r\n            : children\r\n          : React.createElement(component, props)\r\n        : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Route;\r\n","import React from 'react';\nimport { useRouterContext } from './Router';\n\nconst LinkAnchor = ({ to, navigate, children }) => {\n  const handleClick = e => {\n    e.preventDefault();\n    navigate();\n  };\n  return (\n    <a href={to} onClick={handleClick}>\n      {children}\n    </a>\n  );\n};\n\nconst Link = ({ to, children }) => {\n  const { history } = useRouterContext();\n  const navigate = () => {\n    history.push(to);\n  };\n  return <LinkAnchor to={to} navigate={navigate} children={children} />;\n};\n\nexport default Link;\n","import React from 'react';\nimport { Link } from '../../lib/router';\n\nconst Alg = () => {\n  return (\n    <div>\n      <Link to=\"/main\">go to main page</Link>\n    </div>\n  );\n};\n\nexport default Alg;\n","import React, { useEffect, useState } from 'react';\r\nimport { Link } from '../../lib/router';\r\n\r\nconst Main = () => {\r\n  const [state, setState] = useState(0);\r\n  useEffect(() => {\r\n    console.log('--------', state);\r\n  }, [state]);\r\n\r\n  const resetVal = () => setState(prevState => prevState + 1);\r\n  return (\r\n    <div>\r\n      <div onClick={resetVal}>0000</div>\r\n      <Link to=\"/alg\">alg page</Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React from 'react';\nimport { BrowserRouter, Switch, Route } from 'lib/router';\nimport Alg from 'pages/Alg';\nimport Main from 'pages/Main';\n\nconst Router = ({ history }) => {\n  return (\n    <BrowserRouter history={history}>\n      <Switch>\n        <Route path=\"/alg\" component={Alg} />\n        <Route path=\"/main\" component={Main} />\n      </Switch>\n    </BrowserRouter>\n  );\n};\n\nexport default Router;\n","import { createBrowserHistory } from 'history';\n\nconst history = createBrowserHistory();\n\nexport default history;\n","import React, { useState } from 'react';\nimport Router from './router';\nimport history from './common/utils/history';\n\n// const cloneDeep = target => {\n//   return {\n//     ...target,\n//   };\n// };\n\nfunction App() {\n  const [state, setState] = useState(0);\n  // useEffect(() => {\n  //   const obj = {\n  //     a: {\n  //       aa: {\n  //         aaa: 1,\n  //       },\n  //     },\n  //     b: {\n  //       bb: 2,\n  //     },\n  //     c: 3,\n  //   };\n  //   const newObj = produce(obj, draft => {\n  //     draft.a.aa.aaa = 10;\n  //   });\n  //   console.log('----', newObj.a.aa, obj.a.aa, newObj.a.aa === obj.a.aa);\n  //   console.log('--==--', newObj.b, obj.b, newObj.b === obj.b);\n  // }, []);\n\n  const resetVal = () => setState(prevState => prevState + 1);\n\n  // useEffect(() => {\n  //   console.log('--------', state);\n  // }, [state]);\n\n  return (\n    <div className=\"App\">\n      <div>{state}</div>\n      <div onClick={resetVal}>点击 +1</div>\n      <Router history={history} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n"],"sourceRoot":""}